<% class_name = post.class.to_s %>
<% if (class_name == "Comment") %>
  <% action = comment_replies_url(post) %>
<% elsif (class_name == "Status") %>
  <% action = status_replies_url(post) %>
<% end %>

<% post.replies.each do |reply| %>
  <%= reply.author.name %>
  <%= reply.text %>
  <%= render 'likes/like', :post => reply %>
<% end %>

<form action="<%= action %>" method="POST">
  <input
     name="authenticity_token"
     type="hidden"
     value="<%= form_authenticity_token %>">

  Reply
  <textarea name="reply[text]"></textarea>

  <input type="hidden" name="reply[author_id]"
  value="<%= current_user.id %>">
  <input type="hidden" name="reply[parent_id]" value="<%= post.id %>">
  <input type="hidden" name="reply[parent_type]" value="<%= class_name %>">

  <input type="submit" value="Submit">
</form>